我们简单地将TCP/IP分为四层，包括链路层，网络层，运输层，应用层。

下面我们从下往上看，也就是从链路层往上看，直到应用层。

也就是说每一层的封包基本上遵循的是头部+数据部分

##链路层##
以太网数据帧的长度必须在46~1500字节之间，这是由以太网的物理特性决定的。这个1500字节被称为链路层的MTU(最大传输单元)，也就是说它能够接受的是从网络层扔给它的最大数据是1500字节，以太网数据帧还要包括它自身的18字节的头部。
也就是说一个所谓的

```
一个以太网数据包=18字节头部+最大1500字节数据部分
```

##网络层##


```
一个ip数据包=20字节头部+最大1480字节数据部分

```

##运输层##


```
一个UDP数据包=8字节头部+最大1472字节数据部分

```
当我们发送的UDP数据大于1472的时候会怎样呢?

这也就是说IP数据报大于1500字节,大于MTU.这个时候发送方IP层就需要分片(fragmentation).
把数据报分成若干片,使每一片都小于MTU.而接收方IP层则需要进行数据报的重组.
这样就会多做许多事情,而更严重的是,由于UDP的特性,当某一片数据传送中丢失时,接收方便
无法重组数据报.将导致丢弃整个UDP数据报.

<font color="red">鉴于Internet上的标准MTU值为576字节,所以我建议在进行Internet的UDP编程时.

最好将UDP的数据长度控件在548字节(576-8[udp8字节头部]-20[ip20字节头部])以内.

在许多UDP应用程序的设计中，其应用程序数据被限制成512字节或更小.
</font>