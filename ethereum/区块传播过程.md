

这里说一下传播过程

![](/Users/daminyang/github/github.com/teachain/study/ethereum/区块的传播过程.png)



第一轮：
 黄色的节点表示矿工，矿工挖到区块后，接下来要将区块广播出去，也就是发送给相邻的节点，这里相邻的节点有5个，两个红色的节点和三个蓝色的节点。红色的节点表示收到**区块**的节点，蓝色的节点表示收到**区块哈希**的节点。

这里红色的节点是有一定数量要求的。取的是，要广播的节点数量的平方根。要广播5个节点，5取平方根再取整为2个。也就是说矿工向这两个红色节点直接发送了**区块**，然后向剩余的节点发送了**区块哈希**。

第二轮：
 接收到**区块哈希**的蓝色节点向发来**区块哈希**的节点（也就是矿工）请求**下载区块**，下载完区块后，蓝色节点向它的相邻节点发送**区块哈希**。准确来说，应该是这样子的：

接收到**区块哈希**的蓝色节点向发来**区块哈希**的节点发送区块头请求，然后得到区块头以后，再向发来**区块哈希**的节点请求区块体，得到区块体以后，把区块头和区块体合起来形成区块，然后插入本地数据库，然后接着广播该区块哈希。其实就是上一个节点告诉我有一个区块了，然后我去取得完整的区块以后，才会告诉我的邻居节点我有新区块了。(作为中继节点，并不是源节点)

接收到**区块**的红色节点向它的相邻节点发送**区块哈希**。也就是接下去的所有节点都是蓝色节点，要经历接收区块哈希，请求下载区块，发送区块哈希的过程。

第n轮：
 同第二轮，直到整个网络都知晓广播的区块。

